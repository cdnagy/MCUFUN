/*
 * mainApp.h
 *
 *  Created on: Sep 10, 2019
 *      Author: chris
 */

#ifndef MAINAPP_H_
#define MAINAPP_H_

#include "includes.h"

typedef enum {
	DO_NOTHING,
	LIDAR_MOTOR_ON,
	LIDAR_MOTOR_OFF,
	LIDAR_GET_INFO,
	LIDAR_START_SCAN,
}commands;

typedef struct {
	uint8_t start_flag1;
	uint8_t start_flag2;
	unsigned data_response_length : 30;
	unsigned send_mode: 2;
	uint8_t data_type;
}lidarResponse;

typedef struct {
	uint8_t model;
	uint8_t firmware_minor;
	uint8_t firmware_major;
	uint8_t hardware;
	uint8_t serial[16];
}lidarInfo;

struct MainApp{
	uint32_t 	printFlag;
	uint8_t		printBuffer[50];

	commands	command;
	lidarResponse response;
	lidarInfo info;
};

extern struct MainApp app;

void mainAppInit(void);

#endif /* MAINAPP_H_ */
